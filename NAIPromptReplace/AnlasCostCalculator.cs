using NAIPromptReplace.Models;

namespace NAIPromptReplace;

public static class AnlasCostCalculator
{
    #region Anlas calculation statics
    private static readonly int[] resolutionCurveBase =
    [
        1, 2, 4, 3, 6, 9, 8, 12, 16, 5, 10, 15, 20, 25, 18, 24, 30, 36, 7, 14, 21, 28, 35, 42, 49, 32, 40, 48, 56, 64, 27, 45, 54, 63, 72, 81, 50, 60, 70, 80, 90, 100, 11, 22, 33, 44, 55, 66, 77, 88, 99,
        110, 121, 84, 96, 108, 120, 132, 144, 13, 26, 39, 52, 65, 78, 91, 104, 117, 130, 143, 156, 169, 98, 112, 126, 140, 154, 168, 182, 196, 75, 105, 135, 150, 165, 180, 195, 210, 225, 128, 160, 176,
        192, 208, 224, 240, 256, 17, 34, 51, 68, 85, 102, 119, 136, 153, 170, 187, 204, 221, 238, 255, 272, 289, 162, 198, 216, 234, 252, 270, 288, 306, 324, 19, 38, 57, 76, 95, 114, 133, 152, 171, 190,
        209, 228, 247, 266, 285, 304, 323, 342, 361, 200, 220, 260, 280, 300, 320, 340, 360, 380, 400, 147, 189, 231, 273, 294, 315, 336, 357, 378, 399, 420, 441, 242, 264, 286, 308, 330, 352, 374, 396,
        418, 440, 462, 484, 23, 46, 69, 92, 115, 138, 161, 184, 207, 230, 253, 276, 299, 322, 345, 368, 391, 414, 437, 460, 483, 506, 529, 312, 384, 408, 432, 456, 480, 504, 528, 552, 576, 125, 175, 250,
        275, 325, 350, 375, 425, 450, 475, 500, 525, 550, 575, 600, 625, 338, 364, 390, 416, 442, 468, 494, 520, 546, 572, 598, 624, 650, 676, 243, 297, 351, 405, 459, 486, 513, 540, 567, 594, 621, 648,
        675, 702, 729, 392, 448, 476, 532, 560, 588, 616, 644, 672, 700, 728, 756, 29, 58, 87, 116, 145, 174, 203, 232, 261, 290, 319, 348, 377, 406, 435, 464, 493, 522, 551, 580, 609, 638, 667, 696, 725,
        754, 510, 570, 630, 660, 690, 720, 750, 31, 62, 93, 124, 155, 186, 217, 248, 279, 310, 341, 372, 403, 434, 465, 496, 527, 558, 589, 620, 651, 682, 713, 744, 512, 544, 608, 640, 704, 736, 768, 363,
        429, 495, 561, 627, 693, 726, 759, 578, 612, 646, 680, 714, 748, 245, 385, 455, 490, 595, 665, 735, 684, 37, 74, 111, 148, 185, 222, 259, 296, 333, 370, 407, 444, 481, 518, 555, 592, 629, 666, 703,
        740, 722, 760, 507, 585, 663, 741, 41, 82, 123, 164, 205, 246, 287, 328, 369, 410, 451, 492, 533, 574, 615, 656, 697, 738, 43, 86, 129, 172, 215, 258, 301, 344, 387, 430, 473, 516, 559, 602, 645,
        688, 731, 765, 47, 94, 141, 188, 235, 282, 329, 376, 423, 470, 517, 564, 611, 658, 705, 752, 343, 539, 637, 686, 53, 106, 159, 212, 265, 318, 371, 424, 477, 530, 583, 636, 689, 742, 605, 715, 59,
        118, 177, 236, 295, 354, 413, 472, 531, 590, 649, 708, 767, 61, 122, 183, 244, 305, 366, 427, 488, 549, 610, 671, 732, 67, 134, 201, 268, 335, 402, 469, 536, 603, 670, 737, 71, 142, 213, 284, 355,
        426, 497, 568, 639, 710, 73, 146, 219, 292, 365, 438, 511, 584, 657, 730, 79, 158, 237, 316, 395, 474, 553, 632, 711, 83, 166, 249, 332, 415, 498, 581, 664, 747, 89, 178, 267, 356, 445, 534, 623,
        712, 97, 194, 291, 388, 485, 582, 679, 101, 202, 303, 404, 505, 606, 707, 103, 206, 309, 412, 515, 618, 721, 107, 214, 321, 428, 535, 642, 749, 109, 218, 327, 436, 545, 654, 763, 113, 226, 339,
        452, 565, 678, 127, 254, 381, 508, 635, 762, 131, 262, 393, 524, 655, 137, 274, 411, 548, 685, 139, 278, 417, 556, 695, 149, 298, 447, 596, 745, 151, 302, 453, 604, 755, 157, 314, 471, 628, 163,
        326, 489, 652, 167, 334, 501, 668, 173, 346, 519, 692, 179, 358, 537, 716, 181, 362, 543, 724, 191, 382, 573, 764, 193, 386, 579, 197, 394, 591, 199, 398, 597, 211, 422, 633, 223, 446, 669, 227,
        454, 681, 229, 458, 687, 233, 466, 699, 239, 478, 717, 241, 482, 723, 251, 502, 753, 257, 514, 263, 526, 269, 538, 271, 542, 277, 554, 281, 562, 283, 566, 293, 586, 307, 614, 311, 622, 313, 626,
        317, 634, 331, 662, 337, 674, 347, 694, 349, 698, 353, 706, 359, 718, 367, 734, 373, 746, 379, 758, 383, 766, 389, 397, 401, 409, 419, 421, 431, 433, 439, 443, 449, 457, 461, 463, 467, 479, 487,
        491, 499, 503, 509, 521, 523, 541, 547, 557, 563, 569, 571, 577, 587, 593, 599, 601, 607, 613, 617, 619, 631, 641, 643, 647, 653, 659, 661, 673, 677, 683, 691, 701, 709, 719, 727, 733, 739, 743,
        751, 757, 761
    ];
    private static readonly float[] smeaCosts =
    [
        .124f, .11f, .124f, .205f, .121f, .307f, .121f, .227f, .12f, .31f, .121f, .257f, .121f, .251f, .123f, .297f, .121f, .298f, .12f, .305f, .128f, .195f, .12f, .327f, .117f, .34f, .122f, .244f, .12f,
        .28f, .119f, .344f, .125f, .216f, .135f, .149f, .12f, .314f, .121f, .314f, .122f, .253f, .118f, .286f, .119f, .364f, .125f, .319f, .127f, .327f, .119f, .281f, .122f, .305f, .126f, .331f, .133f,
        .333f, .142f, .366f, .117f, .355f, .126f, .328f, .131f, .362f, .14f, .38f, .16f, .401f, .168f, .43f, .127f, .353f, .137f, .355f, .157f, .393f, .17f, .398f, .181f, .437f, .201f, .458f, .122f, .313f,
        .118f, .412f, .12f, .319f, .123f, .431f, .132f, .355f, .153f, .371f, .164f, .424f, .181f, .451f, .199f, .463f, .218f, .502f, .223f, .511f, .172f, .426f, .191f, .454f, .214f, .499f, .235f, .509f,
        .245f, .538f, .27f, .561f, .131f, .163f, .119f, .31f, .124f, .346f, .134f, .362f, .154f, .389f, .164f, .417f, .184f, .445f, .213f, .484f, .231f, .509f, .259f, .556f, .269f, .559f, .289f, .59f,
        .318f, .648f, .2f, .472f, .226f, .509f, .245f, .553f, .29f, .626f, .288f, .601f, .31f, .641f, .342f, .7f, .37f, .729f, .166f, .465f, .211f, .481f, .268f, .581f, .308f, .642f, .307f, .645f, .337f,
        .693f, .371f, .728f, .403f, .765f, .446f, .83f, .262f, .575f, .327f, .677f, .329f, .665f, .357f, .713f, .403f, .782f, .432f, .81f, .467f, .878f, .495f, 1.108f, .124f, .353f, .118f, .376f, .132f,
        .415f, .163f, .453f, .183f, .455f, .206f, .463f, .237f, .562f, .288f, .623f, .316f, .659f, .352f, .704f, .354f, .72f, .394f, .767f, .435f, .824f, .473f, .859f, .518f, .944f, .608f, 1.004f, .657f,
        1.046f, .33f, .677f, .378f, .743f, .418f, .787f, .459f, .851f, .495f, .915f, .598f, 1f, .649f, 1.032f, .695f, 1.097f, .74f, 1.155f, .118f, .336f, .123f, .352f, .139f, .423f, .179f, .488f, .202f,
        .493f, .226f, .518f, .278f, .576f, .318f, .655f, .353f, .702f, .396f, .782f, .408f, .778f, .445f, .829f, .497f, .91f, .587f, .967f, .645f, 1.031f, .694f, 1.083f, .747f, 1.149f, .807f, 1.214f,
        .882f, 1.277f, .427f, .829f, .427f, .806f, .564f, .962f, .619f, 1.011f, .679f, 1.071f, .727f, 1.13f, .792f, 1.198f, .859f, 1.258f, .919f, 1.509f, .99f, 1.387f, .304f, .663f, .387f, .781f, .46f,
        .86f, .613f, .983f, .663f, 1.044f, .721f, 1.131f, .779f, 1.175f, .864f, 1.265f, .923f, 1.312f, 1.001f, 1.4f, 1.063f, 1.456f, 1.147f, 1.531f, .487f, .886f, .569f, .957f, .641f, 1.036f, .698f, 1.08f,
        .76f, 1.166f, .827f, 1.24f, .91f, 1.317f, .979f, 1.374f, 1.062f, 1.457f, 1.124f, 1.515f, 1.216f, 1.598f, 1.282f, 1.888f, .118f, .363f, .128f, .359f, .169f, .421f, .215f, .507f, .251f, .558f, .277f,
        .589f, .334f, .706f, .389f, .792f, .439f, .835f, .502f, .941f, .514f, .933f, .614f, 1.001f, .681f, 1.076f, .735f, 1.135f, .822f, 1.243f, .881f, 1.283f, .975f, 1.383f, 1.05f, 1.434f, 1.131f, 1.535f,
        1.206f, 1.588f, 1.304f, 1.672f, 1.383f, 1.751f, 1.517f, 1.836f, .708f, 1.106f, .929f, 1.33f, 1.034f, 1.421f, 1.112f, 1.486f, 1.192f, 1.568f, 1.273f, 1.653f, 1.369f, 1.732f, 1.477f, 1.809f, 1.598f,
        1.918f, 1.685f, 2.405f, .266f, .62f, .366f, .725f, .553f, 1.015f, .614f, .993f, .753f, 1.168f, .827f, 1.251f, .918f, 1.322f, 1.093f, 1.48f, 1.174f, 1.548f, 1.276f, 1.653f, 1.351f, 1.723f, 1.495f,
        1.82f, 1.592f, 1.896f, 1.71f, 1.991f, 1.803f, 2.082f, 1.949f, 2.17f, .791f, 1.182f, .869f, 1.266f, .966f, 1.358f, 1.057f, 1.445f, 1.145f, 1.521f, 1.234f, 1.615f, 1.335f, 1.709f, 1.444f, 1.775f,
        1.578f, 1.877f, 1.676f, 1.957f, 1.804f, 2.064f, 1.911f, 2.146f, 2.046f, 2.589f, 2.177f, 2.305f, .526f, .984f, .679f, 1.072f, .843f, 1.229f, 1.031f, 1.418f, 1.211f, 1.586f, 1.296f, 1.666f, 1.447f,
        1.789f, 1.545f, 1.856f, 1.677f, 1.954f, 1.789f, 2.035f, 1.929f, 2.148f, 2.039f, 2.218f, 2.196f, 2.324f, 2.318f, 2.412f, 2.461f, 3.092f, .962f, 1.356f, 1.164f, 1.536f, 1.266f, 1.643f, 1.509f,
        1.832f, 1.619f, 1.906f, 1.758f, 2.025f, 1.876f, 2.117f, 2.024f, 2.21f, 2.143f, 2.306f, 2.308f, 2.4f, 2.441f, 2.479f, 2.607f, 2.599f, .122f, .298f, .138f, .44f, .207f, .522f, .271f, .613f, .325f,
        .658f, .359f, .722f, .44f, .853f, .516f, .965f, .619f, 1.057f, .726f, 1.162f, .733f, 1.151f, .821f, 1.226f, .927f, 1.333f, 1.026f, 1.427f, 1.125f, 1.518f, 1.218f, 1.601f, 1.345f, 1.725f, 1.467f,
        1.793f, 1.608f, 1.918f, 1.717f, 1.998f, 1.869f, 2.107f, 1.992f, 2.191f, 2.143f, 2.304f, 2.282f, 2.399f, 2.451f, 2.51f, 2.603f, 2.567f, 1.403f, 1.76f, 1.68f, 1.958f, 1.953f, 2.159f, 2.089f, 2.245f,
        2.263f, 2.348f, 2.397f, 2.443f, 2.579f, 2.569f, .127f, .297f, .145f, .444f, .215f, .553f, .288f, .632f, .346f, .706f, .384f, .777f, .472f, .892f, .554f, 1.006f, .676f, 1.088f, .786f, 1.24f, .81f,
        1.227f, .896f, 1.306f, 1.026f, 1.417f, 1.112f, 1.508f, 1.238f, 1.629f, 1.332f, 1.692f, 1.498f, 1.841f, 1.627f, 1.938f, 1.777f, 2.056f, 1.901f, 2.124f, 2.069f, 2.254f, 2.219f, 2.342f, 2.397f,
        2.451f, 2.534f, 2.532f, 1.391f, 1.748f, 1.567f, 1.879f, 1.846f, 2.099f, 1.987f, 2.183f, 2.318f, 2.394f, 2.49f, 2.517f, 2.655f, 2.846f, .888f, 1.271f, 1.106f, 1.503f, 1.347f, 1.719f, 1.658f, 1.947f,
        1.952f, 2.163f, 2.293f, 2.408f, 2.443f, 2.48f, 2.638f, 2.641f, 1.722f, 2.012f, 1.858f, 2.103f, 2.039f, 2.222f, 2.192f, 2.322f, 2.389f, 2.45f, 2.555f, 2.534f, .544f, 1.001f, .959f, 1.358f, 1.195f,
        1.585f, 1.313f, 1.682f, 1.803f, 2.055f, 2.141f, 2.291f, 2.5f, 2.548f, 2.233f, 2.358f, .12f, .401f, .173f, .466f, .256f, .596f, .356f, .725f, .422f, .821f, .474f, .891f, .62f, 1.024f, .753f, 1.209f,
        .85f, 1.303f, .993f, 1.488f, 1.039f, 1.441f, 1.146f, 1.555f, 1.304f, 1.675f, 1.455f, 1.791f, 1.628f, 1.944f, 1.77f, 2.057f, 1.971f, 2.193f, 2.135f, 2.294f, 2.335f, 2.44f, 2.514f, 2.556f, 2.428f,
        2.465f, 2.608f, 2.598f, 1.4f, 1.78f, 1.76f, 2.016f, 2.127f, 2.291f, 2.545f, 2.565f, .123f, .388f, .193f, .502f, .286f, .636f, .395f, .788f, .48f, .907f, .536f, .976f, .72f, 1.159f, .853f, 1.328f,
        .984f, 1.434f, 1.156f, 1.626f, 1.186f, 1.572f, 1.319f, 1.677f, 1.536f, 1.863f, 1.696f, 1.993f, 1.893f, 2.143f, 2.072f, 2.251f, 2.309f, 2.423f, 2.516f, 2.527f, .127f, .394f, .203f, .51f, .308f,
        .644f, .426f, .831f, .506f, .959f, .608f, 1.045f, .764f, 1.198f, .917f, 1.382f, 1.046f, 1.523f, 1.223f, 1.701f, 1.274f, 1.655f, 1.436f, 1.791f, 1.643f, 1.951f, 1.821f, 2.073f, 2.045f, 2.237f,
        2.24f, 2.365f, 2.488f, 2.53f, 2.675f, 2.647f, .129f, .395f, .216f, .524f, .339f, .691f, .468f, .906f, .565f, 1.04f, .689f, 1.11f, .849f, 1.313f, 1.028f, 1.538f, 1.185f, 1.637f, 1.391f, 1.869f,
        1.467f, 1.823f, 1.652f, 1.942f, 1.88f, 2.122f, 2.092f, 2.249f, 2.352f, 2.446f, 2.574f, 2.58f, .906f, 1.364f, 1.564f, 1.875f, 2.007f, 2.209f, 2.237f, 2.35f, .134f, .383f, .246f, .549f, .385f, .768f,
        .547f, 1.009f, .71f, 1.157f, .801f, 1.259f, 1.005f, 1.472f, 1.225f, 1.726f, 1.407f, 1.886f, 1.667f, 2.113f, 1.755f, 2.026f, 1.977f, 2.176f, 2.276f, 2.397f, 2.529f, 2.537f, 1.856f, 2.118f, 2.406f,
        2.485f, .139f, .441f, .272f, .613f, .442f, .851f, .616f, 1.122f, .806f, 1.297f, .929f, 1.378f, 1.17f, 1.653f, 1.417f, 1.91f, 1.656f, 2.097f, 1.996f, 2.433f, 2.071f, 2.271f, 2.35f, 2.434f, 2.684f,
        2.679f, .142f, .454f, .278f, .623f, .45f, .877f, .641f, 1.17f, .841f, 1.33f, .964f, 1.419f, 1.217f, 1.709f, 1.48f, 1.978f, 1.744f, 2.158f, 2.098f, 2.514f, 2.17f, 2.34f, 2.473f, 2.522f, .16f, .37f,
        .312f, .661f, .508f, .92f, .777f, 1.263f, .946f, 1.468f, 1.107f, 1.557f, 1.39f, 1.861f, 1.753f, 2.252f, 2.027f, 2.886f, 2.413f, 2.751f, 2.534f, 2.584f, .154f, .911f, .337f, .696f, .542f, 1.012f,
        .834f, 1.35f, 1.03f, 1.549f, 1.187f, 1.656f, 1.502f, 1.978f, 1.923f, 2.383f, 2.229f, 2.574f, 2.655f, 2.937f, .169f, .477f, .347f, .707f, .564f, 1.037f, .863f, 1.391f, 1.07f, 1.589f, 1.234f, 1.701f,
        1.561f, 2.03f, 1.999f, 2.441f, 2.329f, 2.671f, 2.786f, 3.033f, .178f, .491f, .375f, .753f, .619f, 1.118f, .953f, 1.516f, 1.194f, 1.733f, 1.388f, 1.862f, 1.834f, 2.27f, 2.247f, 2.66f, 2.628f,
        2.863f, .193f, .476f, .402f, .791f, .662f, 1.185f, 1.055f, 1.651f, 1.316f, 1.883f, 1.483f, 1.96f, 1.968f, 2.387f, 2.43f, 2.809f, 2.829f, 3.682f, .207f, .527f, .442f, .849f, .777f, 1.263f, 1.174f,
        1.788f, 1.453f, 2.055f, 1.667f, 2.072f, 2.188f, 2.572f, 2.724f, 3.038f, .223f, .55f, .483f, .918f, .865f, 1.386f, 1.31f, 1.945f, 1.629f, 2.214f, 1.926f, 2.321f, 2.5f, 2.798f, .232f, .558f, .512f,
        .96f, .91f, 1.439f, 1.393f, 2.038f, 1.73f, 2.332f, 2.055f, 2.458f, 2.656f, 2.946f, .235f, .536f, .521f, .965f, .935f, 1.477f, 1.426f, 2.075f, 1.799f, 2.374f, 2.121f, 2.491f, 2.751f, 3.017f, .244f,
        .583f, .548f, 1.007f, 1.015f, 1.567f, 1.51f, 2.182f, 1.907f, 2.486f, 2.253f, 2.603f, 2.922f, 3.117f, .249f, .59f, .559f, 1.017f, 1.032f, 1.611f, 1.544f, 2.212f, 1.971f, 2.513f, 2.314f, 2.621f,
        2.998f, 3.511f, .26f, .592f, .582f, 1.079f, 1.099f, 1.669f, 1.626f, 2.321f, 2.079f, 2.649f, 2.466f, 2.754f, .288f, .646f, .679f, 1.203f, 1.285f, 1.917f, 1.939f, 2.649f, 2.492f, 3.013f, 2.942f,
        3.098f, .304f, .651f, .75f, 1.235f, 1.346f, 1.968f, 2.038f, 2.736f, 2.602f, 3.111f, .322f, .673f, .795f, 1.298f, 1.431f, 2.063f, 2.176f, 2.861f, 2.79f, 3.255f, .327f, .677f, .816f, 1.323f, 1.456f,
        2.088f, 2.234f, 2.962f, 2.866f, 3.318f, .355f, .723f, .892f, 1.4f, 1.605f, 2.271f, 2.475f, 3.172f, 3.189f, 3.608f, .358f, .732f, .905f, 1.423f, 1.644f, 2.317f, 2.524f, 3.227f, 3.254f, 3.644f,
        .371f, .752f, .946f, 1.478f, 1.735f, 2.407f, 2.682f, 3.376f, .392f, .777f, 1.032f, 1.594f, 1.835f, 2.53f, 2.866f, 3.557f, .403f, .807f, 1.067f, 1.639f, 1.9f, 2.604f, 2.972f, 3.652f, .428f, .838f,
        1.138f, 1.721f, 2.022f, 2.702f, 3.156f, 3.844f, .446f, .86f, 1.19f, 1.771f, 2.13f, 2.806f, 3.331f, 4.018f, .452f, .859f, 1.204f, 1.803f, 2.163f, 2.827f, 3.384f, 4.062f, .475f, .905f, 1.286f,
        1.927f, 2.345f, 3.023f, 3.691f, 4.356f, .486f, .916f, 1.313f, 1.944f, 2.386f, 3.062f, .496f, .935f, 1.347f, 1.961f, 2.458f, 3.14f, .501f, .942f, 1.363f, 1.987f, 2.493f, 3.16f, .538f, 1.003f, 1.48f,
        2.124f, 2.738f, 3.393f, .575f, 1.056f, 1.601f, 2.287f, 3.003f, 3.665f, .588f, 1.067f, 1.642f, 2.303f, 3.099f, 3.74f, .594f, 1.093f, 1.662f, 2.317f, 3.127f, 3.758f, .615f, 1.094f, 1.714f, 2.388f,
        3.24f, 3.892f, .626f, 1.123f, 1.771f, 2.454f, 3.364f, 4.001f, .641f, 1.14f, 1.799f, 2.48f, 3.406f, 4.043f, .673f, 1.193f, 1.913f, 2.617f, 3.644f, 4.258f, .734f, 1.205f, 1.999f, 2.657f, .752f,
        1.241f, 2.063f, 2.744f, .782f, 1.278f, 2.15f, 2.816f, .785f, 1.285f, 2.162f, 2.824f, .806f, 1.305f, 2.233f, 2.897f, .828f, 1.326f, 2.282f, 2.96f, .835f, 1.334f, 2.313f, 2.962f, .875f, 1.39f,
        2.441f, 3.105f, .928f, 1.464f, 2.616f, 3.288f, .943f, 1.509f, 2.671f, 3.336f, .951f, 1.48f, 2.696f, 3.348f, .967f, 1.494f, 2.755f, 3.403f, 1.059f, 1.632f, 2.958f, 3.607f, 1.086f, 1.663f, 3.061f,
        3.699f, 1.135f, 1.713f, 3.202f, 3.836f, 1.143f, 1.726f, 3.228f, 3.858f, 1.17f, 1.757f, 3.289f, 3.936f, 1.191f, 1.776f, 3.375f, 3.993f, 1.218f, 1.843f, 3.495f, 4.12f, 1.251f, 1.851f, 3.591f, 4.197f,
        1.275f, 1.898f, 3.681f, 4.276f, 1.294f, 1.924f, 3.725f, 4.949f, 1.323f, 1.949f, 1.366f, 1.975f, 1.396f, 2.009f, 1.429f, 2.07f, 1.465f, 2.11f, 1.481f, 2.112f, 1.529f, 2.185f, 1.542f, 2.209f, 1.563f,
        2.229f, 1.592f, 2.251f, 1.623f, 2.281f, 1.661f, 2.331f, 1.687f, 2.378f, 1.696f, 2.384f, 1.715f, 2.399f, 1.771f, 2.453f, 1.82f, 2.506f, 1.852f, 2.536f, 1.888f, 2.568f, 1.921f, 2.618f, 1.958f,
        2.637f, 2.044f, 2.715f, 2.054f, 2.715f, 2.166f, 2.832f, 2.194f, 2.873f, 2.252f, 2.925f, 2.299f, 2.98f, 2.333f, 2.988f, 2.345f, 3.014f, 2.384f, 3.066f, 2.441f, 3.126f, 2.488f, 3.167f, 2.513f,
        3.184f, 2.538f, 3.215f, 2.565f, 3.252f, 2.617f, 3.276f, 2.641f, 3.313f, 2.649f, 3.324f, 2.729f, 3.399f, 2.824f, 3.5f, 2.833f, 3.527f, 2.851f, 3.539f, 2.905f, 3.587f, 2.934f, 3.61f, 2.956f, 3.648f,
        3.061f, 3.745f, 3.078f, 3.759f, 3.116f, 3.8f, 3.176f, 3.835f, 3.248f, 3.917f, 3.303f, 3.949f, 3.366f, 4.011f, 3.424f, 4.059f, 3.493f, 4.067f, 3.529f, 4.156f, 3.565f, 4.197f, 3.626f, 4.261f, 3.675f,
        4.312f, 3.712f, 4.344f
    ];
    private static readonly float[] dynCosts =
    [
        .111f, .306f, .11f, .435f, .113f, .372f, .111f, .418f, .113f, .354f, .11f, .431f, .112f, .354f, .116f, .379f, .112f, .341f, .113f, .43f, .114f, .428f, .113f, .363f, .112f, .411f, .109f, .49f,
        .107f, .472f, .111f, .422f, .106f, .449f, .129f, .197f, .113f, .454f, .113f, .479f, .108f, .417f, .112f, .436f, .109f, .472f, .112f, .48f, .119f, .452f, .108f, .476f, .117f, .407f, .118f, .489f,
        .121f, .498f, .131f, .521f, .109f, .443f, .117f, .466f, .121f, .511f, .13f, .499f, .15f, .556f, .158f, .569f, .116f, .527f, .128f, .488f, .146f, .532f, .158f, .547f, .17f, .61f, .19f, .648f, .109f,
        .527f, .107f, .521f, .109f, .453f, .114f, .559f, .121f, .517f, .141f, .532f, .154f, .566f, .17f, .62f, .189f, .617f, .206f, .677f, .213f, .667f, .162f, .565f, .181f, .606f, .201f, .665f, .222f,
        .683f, .235f, .655f, .26f, .711f, .112f, .523f, .106f, .508f, .112f, .496f, .123f, .511f, .142f, .561f, .156f, .553f, .172f, .626f, .201f, .651f, .218f, .684f, .246f, .738f, .259f, .712f, .278f,
        .749f, .306f, .809f, .188f, .635f, .213f, .685f, .231f, .741f, .273f, .841f, .277f, .77f, .299f, .797f, .331f, .867f, .359f, .884f, .154f, .619f, .199f, .659f, .255f, .767f, .291f, .887f, .296f,
        .8f, .326f, .851f, .359f, .901f, .389f, .956f, .432f, 1.036f, .246f, .788f, .309f, .908f, .317f, .831f, .346f, .873f, .391f, .95f, .42f, 1.014f, .454f, 1.061f, .482f, 1.304f, .108f, .487f, .108f,
        .511f, .12f, .574f, .152f, .614f, .171f, .624f, .194f, .644f, .223f, .765f, .271f, .854f, .299f, .886f, .332f, .967f, .341f, .892f, .382f, .927f, .421f, 1.017f, .46f, 1.052f, .501f, 1.185f, .592f,
        1.234f, .758f, 1.901f, .313f, .914f, .366f, .922f, .405f, .979f, .446f, 1.05f, .481f, 1.106f, .582f, 1.227f, .753f, 1.898f, .812f, 2.058f, .871f, 2.202f, .111f, .484f, .11f, .543f, .128f, .566f,
        .165f, .675f, .189f, .681f, .215f, .688f, .263f, .784f, .301f, .898f, .336f, .943f, .377f, 1.05f, .395f, .967f, .432f, 1.014f, .481f, 1.134f, .571f, 1.199f, .743f, 1.887f, .807f, 2.022f, .87f,
        2.164f, .955f, 2.318f, 1.033f, 2.44f, .406f, 1.115f, .413f, 1.007f, .548f, 1.181f, .719f, 1.83f, .787f, 1.972f, .856f, 2.13f, .934f, 2.335f, 1.021f, 2.464f, 1.085f, 2.954f, 1.175f, 2.804f, .288f,
        .888f, .369f, 1.029f, .445f, 1.07f, .594f, 1.24f, .768f, 1.942f, .84f, 2.142f, .917f, 2.299f, 1.014f, 2.454f, 1.092f, 2.656f, 1.18f, 2.797f, 1.264f, 2.968f, 1.36f, 3.171f, .47f, 1.109f, .554f,
        1.169f, .741f, 1.866f, .822f, 2.049f, .893f, 2.232f, .987f, 2.371f, 1.075f, 2.572f, 1.168f, 2.76f, 1.261f, 2.923f, 1.346f, 3.112f, 1.452f, 3.285f, 1.546f, 3.637f, .109f, .445f, .117f, .508f, .156f,
        .59f, .198f, .736f, .234f, .783f, .264f, .776f, .316f, .944f, .368f, 1.067f, .418f, 1.121f, .477f, 1.27f, .497f, 1.165f, .597f, 1.239f, .786f, 1.946f, .871f, 2.128f, .969f, 2.323f, 1.048f, 2.488f,
        1.15f, 2.694f, 1.248f, 2.917f, 1.345f, 3.039f, 1.441f, 3.219f, 1.551f, 3.478f, 1.658f, 3.621f, 1.802f, 3.796f, .831f, 2.058f, 1.112f, 2.647f, 1.228f, 2.837f, 1.331f, 3.028f, 1.425f, 3.207f, 1.531f,
        3.446f, 1.639f, 3.688f, 1.779f, 3.806f, 1.91f, 4.044f, 2.025f, 4.749f, .249f, .859f, .347f, .988f, .528f, 1.35f, .598f, 1.236f, .886f, 2.204f, .984f, 2.38f, 1.085f, 2.623f, 1.299f, 2.98f, 1.408f,
        3.189f, 1.521f, 3.399f, 1.624f, 3.622f, 1.778f, 3.871f, 1.908f, 4.028f, 2.044f, 4.218f, 2.168f, 4.501f, 2.334f, 4.787f, .935f, 2.334f, 1.039f, 2.53f, 1.144f, 2.761f, 1.267f, 2.919f, 1.368f, 3.141f,
        1.486f, 3.364f, 1.6f, 3.578f, 1.737f, 3.815f, 1.884f, 4.089f, 2.016f, 4.254f, 2.165f, 4.434f, 2.306f, 4.743f, 2.458f, 5.442f, 2.628f, 5.303f, .505f, 1.273f, .784f, 1.984f, .988f, 2.464f, 1.221f,
        2.896f, 1.447f, 3.327f, 1.561f, 3.575f, 1.721f, 3.772f, 1.848f, 4.056f, 1.993f, 4.339f, 2.141f, 4.509f, 2.303f, 4.759f, 2.449f, 5.024f, 2.63f, 5.295f, 2.784f, 5.665f, 2.954f, 6.446f, 1.153f,
        2.729f, 1.402f, 3.164f, 1.521f, 3.474f, 1.803f, 3.918f, 1.945f, 4.196f, 2.102f, 4.488f, 2.257f, 4.696f, 2.435f, 4.908f, 2.591f, 5.223f, 2.78f, 5.515f, 2.946f, 5.892f, 3.135f, 6.253f, .107f, .514f,
        .127f, .604f, .191f, .747f, .251f, .89f, .304f, .95f, .343f, .977f, .42f, 1.152f, .492f, 1.319f, .596f, 1.398f, .801f, 2.2f, .861f, 2.132f, .982f, 2.325f, 1.097f, 2.629f, 1.226f, 2.853f, 1.343f,
        3.067f, 1.471f, 3.284f, 1.604f, 3.6f, 1.762f, 3.871f, 1.917f, 4.087f, 2.062f, 4.331f, 2.235f, 4.653f, 2.4f, 4.852f, 2.573f, 5.081f, 2.756f, 5.446f, 2.948f, 5.749f, 3.137f, 6.11f, 1.682f, 3.809f,
        2.011f, 4.342f, 2.346f, 4.97f, 2.523f, 5.187f, 2.721f, 5.469f, 2.898f, 5.82f, 3.106f, 6.178f, .107f, .512f, .134f, .602f, .199f, .771f, .267f, .926f, .324f, 1.02f, .367f, 1.037f, .45f, 1.214f,
        .528f, 1.379f, .763f, 2.128f, .871f, 2.322f, .956f, 2.33f, 1.073f, 2.55f, 1.218f, 2.824f, 1.338f, 3.036f, 1.479f, 3.324f, 1.606f, 3.61f, 1.786f, 3.884f, 1.952f, 4.204f, 2.121f, 4.421f, 2.278f,
        4.699f, 2.472f, 5.048f, 2.669f, 5.267f, 2.873f, 5.565f, 3.055f, 5.913f, 1.684f, 3.748f, 1.874f, 4.034f, 2.212f, 4.612f, 2.394f, 4.865f, 2.798f, 5.508f, 3.001f, 5.842f, 3.209f, 6.535f, 1.041f,
        2.513f, 1.318f, 3.039f, 1.607f, 3.605f, 1.977f, 4.175f, 2.33f, 4.796f, 2.742f, 5.503f, 2.942f, 5.751f, 3.163f, 6.061f, 2.06f, 4.369f, 2.24f, 4.726f, 2.443f, 5.011f, 2.643f, 5.344f, 2.866f, 5.806f,
        3.086f, 6.029f, .518f, 1.359f, 1.132f, 2.668f, 1.43f, 3.269f, 1.591f, 3.562f, 2.155f, 4.494f, 2.56f, 5.137f, 2.998f, 5.937f, 2.68f, 5.409f, .112f, .51f, .16f, .648f, .237f, .854f, .33f, 1.088f,
        .397f, 1.184f, .454f, 1.182f, .594f, 1.422f, .833f, 2.349f, .97f, 2.642f, 1.141f, 3.038f, 1.228f, 2.886f, 1.379f, 3.133f, 1.552f, 3.543f, 1.745f, 3.838f, 1.943f, 4.217f, 2.129f, 4.478f, 2.352f,
        4.868f, 2.569f, 5.252f, 2.799f, 5.578f, 3.028f, 5.981f, 2.918f, 5.764f, 3.154f, 6.14f, 1.671f, 3.793f, 2.099f, 4.509f, 2.544f, 5.231f, 3.044f, 6.03f, .112f, .535f, .178f, .698f, .264f, .931f,
        .367f, 1.195f, .452f, 1.301f, .514f, 1.306f, .812f, 2.267f, .948f, 2.614f, 1.132f, 3.091f, 1.32f, 3.39f, 1.414f, 3.239f, 1.597f, 3.54f, 1.828f, 3.995f, 2.038f, 4.365f, 2.264f, 4.754f, 2.498f,
        5.084f, 2.766f, 5.538f, 3.03f, 5.989f, .114f, .556f, .187f, .729f, .285f, .964f, .395f, 1.257f, .475f, 1.391f, .586f, 1.376f, .87f, 2.411f, 1.032f, 2.83f, 1.209f, 3.244f, 1.402f, 3.606f, 1.515f,
        3.423f, 1.733f, 3.787f, 1.96f, 4.216f, 2.189f, 4.601f, 2.446f, 5.046f, 2.703f, 5.415f, 2.982f, 5.907f, 3.207f, 6.265f, .118f, .543f, .2f, .751f, .314f, 1.039f, .433f, 1.381f, .53f, 1.518f, .797f,
        2.251f, .971f, 2.691f, 1.165f, 3.179f, 1.366f, 3.615f, 1.597f, 4.02f, 1.743f, 3.827f, 1.987f, 4.229f, 2.246f, 4.77f, 2.526f, 5.18f, 2.822f, 5.666f, 3.112f, 6.181f, 1.04f, 2.838f, 1.857f, 4.081f,
        2.4f, 5.025f, 2.699f, 5.505f, .123f, .529f, .229f, .804f, .357f, 1.17f, .507f, 1.559f, .671f, 1.714f, .944f, 2.663f, 1.159f, 3.125f, 1.38f, 3.653f, 1.623f, 4.191f, 1.923f, 4.692f, 2.088f, 4.445f,
        2.387f, 4.882f, 2.723f, 5.52f, 3.056f, 6.062f, 2.211f, 4.638f, 2.883f, 5.815f, .128f, .586f, .253f, .879f, .409f, 1.323f, .572f, 1.733f, .886f, 2.589f, 1.099f, 3.002f, 1.354f, 3.605f, 1.612f,
        4.215f, 1.926f, 4.81f, 2.259f, 5.386f, 2.47f, 5.116f, 2.842f, 5.633f, 3.221f, 6.399f, .131f, .604f, .257f, .918f, .417f, 1.332f, .593f, 1.809f, .925f, 2.675f, 1.145f, 3.129f, 1.409f, 3.75f, 1.685f,
        4.404f, 2.025f, 5.058f, 2.373f, 5.661f, 2.594f, 5.369f, 2.991f, 5.9f, .147f, .544f, .29f, .964f, .47f, 1.44f, .724f, 1.995f, 1.037f, 3.001f, 1.326f, 3.533f, 1.606f, 4.764f, 1.963f, 4.943f, 2.324f,
        6.118f, 2.763f, 6.436f, 3.029f, 6.077f, .154f, .65f, .313f, 1.037f, .504f, 1.547f, .815f, 2.348f, 1.133f, 3.209f, 1.425f, 3.795f, 1.754f, 4.551f, 2.145f, 5.343f, 2.542f, 6.145f, 3.036f, 6.988f,
        .158f, .645f, .322f, 1.069f, .523f, 1.608f, .865f, 2.473f, 1.176f, 3.319f, 1.483f, 3.918f, 1.829f, 4.66f, 2.239f, 5.529f, 2.667f, 6.374f, 3.178f, 7.245f, .165f, .676f, .348f, 1.133f, .574f, 1.742f,
        .962f, 2.798f, 1.319f, 3.681f, 1.667f, 4.318f, 2.092f, 5.167f, 2.526f, 6.168f, 3.03f, 7.174f, .178f, .677f, .371f, 1.211f, .615f, 1.841f, 1.023f, 2.954f, 1.409f, 3.868f, 1.785f, 4.571f, 2.258f,
        5.517f, 2.734f, 6.496f, 3.274f, 8.097f, .191f, .751f, .409f, 1.313f, .724f, 2f, 1.133f, 3.173f, 1.56f, 4.245f, 2.006f, 5.021f, 2.516f, 6.092f, 3.074f, 7.279f, .206f, .777f, .449f, 1.393f, .868f,
        2.505f, 1.28f, 3.592f, 1.762f, 4.737f, 2.291f, 5.699f, 2.882f, 6.891f, .214f, .803f, .475f, 1.47f, .921f, 2.639f, 1.363f, 3.758f, 1.874f, 5.012f, 2.441f, 6.031f, 3.074f, 7.254f, .218f, .774f,
        .483f, 1.485f, .941f, 2.715f, 1.393f, 3.833f, 1.949f, 5.129f, 2.523f, 6.197f, 3.177f, 7.536f, .225f, .835f, .509f, 1.551f, .991f, 2.843f, 1.471f, 4.045f, 2.061f, 5.359f, 2.679f, 6.473f, 3.384f,
        7.857f, .23f, .839f, .518f, 1.589f, 1.01f, 2.918f, 1.507f, 4.124f, 2.127f, 5.496f, 2.758f, 6.672f, 3.468f, 8.518f, .24f, .878f, .54f, 1.639f, 1.064f, 3.035f, 1.589f, 4.358f, 2.245f, 5.776f, 2.93f,
        6.995f, .267f, .95f, .629f, 1.88f, 1.251f, 3.491f, 1.879f, 5.02f, 2.706f, 6.873f, 3.534f, 8.253f, .282f, .957f, .698f, 1.936f, 1.318f, 3.674f, 1.988f, 5.194f, 2.839f, 7.162f, .299f, 1.002f, .741f,
        2.022f, 1.402f, 3.817f, 2.13f, 5.525f, 3.056f, 7.647f, .303f, 1.003f, .79f, 2.229f, 1.424f, 3.894f, 2.174f, 5.621f, 3.126f, 7.774f, .329f, 1.072f, .899f, 2.57f, 1.566f, 4.291f, 2.435f, 6.232f,
        3.498f, 8.589f, .331f, 1.098f, .912f, 2.637f, 1.604f, 4.36f, 2.489f, 6.375f, 3.577f, 8.772f, .344f, 1.113f, .956f, 2.769f, 1.693f, 4.535f, 2.646f, 6.725f, .363f, 1.168f, 1.004f, 2.885f, 1.781f,
        4.756f, 2.809f, 7.077f, .373f, 1.216f, 1.037f, 2.961f, 1.843f, 4.9f, 2.915f, 7.321f, .396f, 1.259f, 1.101f, 3.11f, 1.97f, 5.128f, 3.093f, 7.713f, .413f, 1.308f, 1.149f, 3.202f, 2.077f, 5.374f,
        3.266f, 8.1f, .417f, 1.315f, 1.166f, 3.231f, 2.115f, 5.437f, 3.325f, 8.21f, .44f, 1.389f, 1.254f, 3.49f, 2.302f, 5.883f, 3.633f, 8.908f, .451f, 1.402f, 1.281f, 3.538f, 2.344f, 5.997f, .46f, 1.425f,
        1.32f, 3.655f, 2.416f, 6.188f, .464f, 1.443f, 1.337f, 3.656f, 2.457f, 6.268f, .499f, 1.533f, 1.44f, 3.931f, 2.699f, 6.816f, .533f, 1.628f, 1.559f, 4.244f, 2.939f, 7.324f, .545f, 1.656f, 1.609f,
        4.348f, 3.039f, 7.52f, .55f, 1.661f, 1.63f, 4.4f, 3.073f, 7.62f, .57f, 1.706f, 1.674f, 4.467f, 3.177f, 7.809f, .58f, 1.74f, 1.733f, 4.607f, 3.307f, 8.116f, .594f, 1.781f, 1.75f, 4.65f, 3.347f,
        8.175f, .623f, 1.869f, 1.859f, 4.911f, 3.583f, 8.732f, .683f, 1.907f, 1.95f, 5.08f, .701f, 1.943f, 2.019f, 5.262f, .729f, 2.001f, 2.1f, 5.418f, .733f, 1.999f, 2.119f, 5.443f, .752f, 2.051f, 2.192f,
        5.611f, .805f, 2.292f, 2.238f, 5.716f, .811f, 2.303f, 2.262f, 5.781f, .874f, 2.536f, 2.397f, 6.108f, .931f, 2.702f, 2.58f, 6.542f, .944f, 2.726f, 2.632f, 6.658f, .956f, 2.744f, 2.655f, 6.719f,
        .968f, 2.8f, 2.714f, 6.822f, 1.026f, 2.924f, 2.902f, 7.246f, 1.055f, 2.992f, 2.999f, 7.435f, 1.102f, 3.115f, 3.141f, 7.738f, 1.111f, 3.127f, 3.169f, 7.831f, 1.133f, 3.179f, 3.221f, 7.923f, 1.153f,
        3.253f, 3.313f, 8.146f, 1.184f, 3.314f, 3.431f, 8.397f, 1.213f, 3.385f, 3.523f, 8.564f, 1.238f, 3.464f, 3.616f, 8.82f, 1.257f, 3.517f, 3.661f, 9.465f, 1.295f, 3.578f, 1.335f, 3.672f, 1.362f, 3.73f,
        1.396f, 3.805f, 1.432f, 3.882f, 1.441f, 3.918f, 1.485f, 4.063f, 1.501f, 4.092f, 1.527f, 4.152f, 1.55f, 4.212f, 1.587f, 4.309f, 1.628f, 4.396f, 1.649f, 4.449f, 1.658f, 4.459f, 1.676f, 4.51f, 1.734f,
        4.651f, 1.773f, 4.753f, 1.799f, 4.783f, 1.84f, 4.883f, 1.863f, 4.939f, 1.903f, 5.026f, 1.996f, 5.188f, 2.007f, 5.205f, 2.117f, 5.45f, 2.148f, 5.513f, 2.208f, 5.649f, 2.25f, 5.72f, 2.287f, 5.833f,
        2.299f, 5.88f, 2.344f, 5.967f, 2.405f, 6.118f, 2.453f, 6.217f, 2.483f, 6.334f, 2.504f, 6.358f, 2.532f, 6.484f, 2.582f, 6.557f, 2.606f, 6.581f, 2.615f, 6.62f, 2.691f, 6.781f, 2.767f, 6.949f, 2.782f,
        6.956f, 2.801f, 7.054f, 2.846f, 7.22f, 2.879f, 7.245f, 2.895f, 7.242f, 2.995f, 7.462f, 3.016f, 7.503f, 3.058f, 7.585f, 3.113f, 7.712f, 3.187f, 7.861f, 3.242f, 8.028f, 3.311f, 8.162f, 3.364f,
        8.307f, 3.427f, 8.384f, 3.465f, 8.516f, 3.491f, 8.6f, 3.553f, 8.705f, 3.607f, 8.804f, 3.639f, 8.894f
    ];
    private static readonly float[] naiCosts =
    [
        .07f, .067f, .07f, .138f, .074f, .121f, .069f, .165f, .069f, .172f, .068f, .229f, .07f, .13f, .071f, .21f, .068f, .153f, .069f, .149f, .071f, .127f, .068f, .185f, .062f, .389f, .067f, .206f, .067f,
        .18f, .068f, .179f, .067f, .222f, .083f, .028f, .069f, .155f, .068f, .204f, .067f, .206f, .066f, .21f, .07f, .221f, .072f, .234f, .075f, .273f, .067f, .215f, .072f, .22f, .075f, .243f, .081f,
        .275f, .09f, .285f, .067f, .199f, .074f, .251f, .081f, .268f, .09f, .29f, .109f, .307f, .118f, .323f, .079f, .244f, .087f, .27f, .106f, .305f, .116f, .314f, .129f, .344f, .146f, .355f, .072f,
        .145f, .072f, .156f, .068f, .248f, .074f, .259f, .079f, .283f, .102f, .298f, .113f, .319f, .127f, .35f, .145f, .373f, .158f, .39f, .173f, .416f, .119f, .356f, .137f, .352f, .158f, .391f, .174f,
        .411f, .194f, .442f, .22f, .475f, .07f, .172f, .066f, .21f, .072f, .23f, .079f, .269f, .1f, .293f, .113f, .321f, .13f, .348f, .153f, .38f, .17f, .415f, .191f, .446f, .217f, .475f, .236f, .515f,
        .261f, .552f, .143f, .378f, .161f, .397f, .18f, .44f, .211f, .481f, .236f, .511f, .257f, .557f, .286f, .603f, .313f, .633f, .111f, .322f, .154f, .388f, .203f, .472f, .228f, .515f, .252f, .554f,
        .281f, .602f, .31f, .642f, .342f, .678f, .378f, .726f, .186f, .443f, .243f, .534f, .273f, .581f, .302f, .621f, .342f, .673f, .372f, .719f, .4f, .765f, .428f, 1.007f, .073f, .142f, .069f, .243f,
        .079f, .264f, .105f, .305f, .123f, .346f, .15f, .383f, .173f, .425f, .207f, .473f, .235f, .524f, .261f, .572f, .294f, .617f, .333f, .681f, .368f, .706f, .406f, .754f, .436f, .809f, .527f, .848f,
        .571f, .891f, .247f, .548f, .318f, .641f, .358f, .69f, .393f, .735f, .427f, .801f, .517f, .846f, .568f, .895f, .611f, .936f, .653f, 1f, .069f, .18f, .072f, .256f, .084f, .286f, .113f, .324f, .135f,
        .378f, .167f, .412f, .203f, .465f, .235f, .507f, .269f, .567f, .3f, .619f, .343f, .677f, .379f, .73f, .418f, .779f, .508f, .849f, .559f, .892f, .608f, .944f, .653f, .984f, .713f, 1.058f, .775f,
        1.103f, .322f, .656f, .361f, .695f, .485f, .821f, .54f, .876f, .594f, .94f, .638f, 1.001f, .696f, 1.043f, .763f, 1.108f, .812f, 1.355f, .884f, 1.204f, .226f, .505f, .299f, .614f, .384f, .734f,
        .529f, .854f, .581f, .901f, .629f, .964f, .685f, 1.031f, .758f, 1.096f, .815f, 1.169f, .885f, 1.2f, .947f, 1.266f, 1.021f, 1.318f, .41f, .776f, .494f, .83f, .558f, .894f, .615f, .959f, .666f,
        1.02f, .735f, 1.074f, .804f, 1.143f, .872f, 1.205f, .947f, 1.257f, 1.009f, 1.317f, 1.089f, 1.386f, 1.154f, 1.712f, .068f, .206f, .075f, .259f, .107f, .31f, .132f, .362f, .168f, .412f, .21f, .476f,
        .249f, .539f, .288f, .604f, .337f, .673f, .383f, .732f, .432f, .818f, .533f, .868f, .592f, .928f, .647f, .991f, .722f, 1.064f, .78f, 1.127f, .858f, 1.206f, .934f, 1.246f, 1.005f, 1.315f, 1.079f,
        1.382f, 1.161f, 1.458f, 1.242f, 1.508f, 1.355f, 1.593f, .621f, .963f, .827f, 1.174f, .919f, 1.228f, .995f, 1.303f, 1.066f, 1.366f, 1.147f, 1.421f, 1.228f, 1.503f, 1.337f, 1.57f, 1.437f, 1.668f,
        1.527f, 2.106f, .181f, .441f, .275f, .577f, .425f, .794f, .531f, .879f, .659f, .994f, .733f, 1.072f, .807f, 1.161f, .969f, 1.281f, 1.049f, 1.357f, 1.135f, 1.43f, 1.212f, 1.509f, 1.337f, 1.555f,
        1.435f, 1.635f, 1.537f, 1.723f, 1.633f, 1.782f, 1.757f, 1.862f, .697f, 1.04f, .774f, 1.123f, .854f, 1.185f, .947f, 1.246f, 1.02f, 1.334f, 1.111f, 1.396f, 1.197f, 1.468f, 1.306f, 1.561f, 1.422f,
        1.607f, 1.522f, 1.682f, 1.634f, 1.771f, 1.742f, 1.865f, 1.86f, 2.242f, 1.991f, 1.983f, .41f, .772f, .591f, .929f, .737f, 1.079f, .914f, 1.228f, 1.08f, 1.379f, 1.166f, 1.453f, 1.295f, 1.528f,
        1.392f, 1.615f, 1.505f, 1.677f, 1.618f, 1.76f, 1.742f, 1.836f, 1.854f, 1.914f, 1.992f, 1.972f, 2.114f, 2.073f, 2.238f, 2.623f, .858f, 1.188f, 1.046f, 1.336f, 1.137f, 1.421f, 1.356f, 1.585f, 1.468f,
        1.653f, 1.589f, 1.737f, 1.706f, 1.818f, 1.837f, 1.916f, 1.958f, 1.982f, 2.101f, 2.075f, 2.236f, 2.15f, 2.382f, 2.218f, .068f, .216f, .084f, .29f, .126f, .352f, .17f, .416f, .222f, .497f, .272f,
        .58f, .333f, .661f, .388f, .731f, .491f, .823f, .569f, .898f, .639f, .986f, .726f, 1.088f, .815f, 1.146f, .914f, 1.232f, .997f, 1.323f, 1.093f, 1.396f, 1.197f, 1.471f, 1.32f, 1.569f, 1.445f,
        1.645f, 1.555f, 1.709f, 1.689f, 1.794f, 1.811f, 1.904f, 1.94f, 1.977f, 2.08f, 2.047f, 2.23f, 2.134f, 2.38f, 2.203f, 1.254f, 1.533f, 1.515f, 1.703f, 1.769f, 1.863f, 1.907f, 1.951f, 2.059f, 2.023f,
        2.194f, 2.124f, 2.353f, 2.202f, .07f, .206f, .089f, .298f, .134f, .354f, .179f, .445f, .238f, .521f, .294f, .602f, .359f, .686f, .419f, .782f, .543f, .866f, .62f, .966f, .711f, 1.044f, .796f,
        1.122f, .908f, 1.221f, .996f, 1.29f, 1.103f, 1.387f, 1.197f, 1.481f, 1.339f, 1.558f, 1.469f, 1.671f, 1.601f, 1.749f, 1.725f, 1.836f, 1.873f, 1.915f, 2.024f, 1.992f, 2.179f, 2.084f, 2.32f, 2.18f,
        1.258f, 1.529f, 1.408f, 1.608f, 1.671f, 1.796f, 1.814f, 1.9f, 2.123f, 2.079f, 2.275f, 2.151f, 2.436f, 2.589f, .777f, 1.115f, .982f, 1.291f, 1.197f, 1.481f, 1.489f, 1.665f, 1.762f, 1.839f, 2.083f,
        2.034f, 2.233f, 2.136f, 2.398f, 2.219f, 1.554f, 1.717f, 1.689f, 1.816f, 1.851f, 1.906f, 2.006f, 1.996f, 2.178f, 2.086f, 2.344f, 2.199f, .415f, .778f, .843f, 1.184f, 1.066f, 1.367f, 1.184f, 1.474f,
        1.625f, 1.753f, 1.938f, 1.953f, 2.273f, 2.155f, 2.03f, 2.008f, .073f, .228f, .11f, .321f, .161f, .403f, .227f, .501f, .293f, .603f, .366f, .729f, .487f, .808f, .584f, .913f, .682f, 1.032f, .792f,
        1.142f, .917f, 1.227f, 1.025f, 1.349f, 1.156f, 1.437f, 1.308f, 1.543f, 1.46f, 1.659f, 1.602f, 1.741f, 1.775f, 1.862f, 1.942f, 1.952f, 2.121f, 2.059f, 2.3f, 2.174f, 2.212f, 2.101f, 2.394f, 2.229f,
        1.246f, 1.521f, 1.583f, 1.717f, 1.922f, 1.949f, 2.313f, 2.16f, .072f, .249f, .119f, .337f, .178f, .432f, .251f, .548f, .336f, .663f, .417f, .764f, .563f, .885f, .662f, 1.001f, .793f, 1.119f, .925f,
        1.238f, 1.054f, 1.351f, 1.187f, 1.467f, 1.373f, 1.598f, 1.535f, 1.689f, 1.706f, 1.814f, 1.884f, 1.945f, 2.094f, 2.059f, 2.299f, 2.158f, .073f, .255f, .126f, .346f, .193f, .446f, .269f, .571f, .35f,
        .693f, .485f, .81f, .6f, .943f, .718f, 1.043f, .846f, 1.164f, .978f, 1.296f, 1.134f, 1.415f, 1.296f, 1.541f, 1.471f, 1.679f, 1.65f, 1.782f, 1.845f, 1.905f, 2.043f, 2.015f, 2.258f, 2.141f, 2.432f,
        2.248f, .075f, .264f, .134f, .364f, .215f, .485f, .294f, .613f, .391f, .751f, .551f, .886f, .67f, 1.013f, .804f, 1.169f, .961f, 1.286f, 1.116f, 1.421f, 1.307f, 1.545f, 1.491f, 1.681f, 1.692f,
        1.817f, 1.905f, 1.939f, 2.133f, 2.071f, 2.355f, 2.216f, .718f, 1.068f, 1.399f, 1.605f, 1.81f, 1.888f, 2.039f, 2.063f, .079f, .286f, .153f, .391f, .242f, .528f, .347f, .687f, .51f, .835f, .639f,
        .978f, .796f, 1.131f, .959f, 1.279f, 1.142f, 1.442f, 1.352f, 1.58f, 1.574f, 1.719f, 1.796f, 1.877f, 2.06f, 2.034f, 2.313f, 2.177f, 1.669f, 1.791f, 2.178f, 2.109f, .085f, .29f, .172f, .417f, .279f,
        .589f, .393f, .747f, .584f, .92f, .75f, 1.084f, .932f, 1.264f, 1.12f, 1.422f, 1.362f, 1.576f, 1.596f, 1.751f, 1.864f, 1.932f, 2.142f, 2.092f, 2.434f, 2.27f, .087f, .298f, .175f, .429f, .285f,
        .598f, .41f, .777f, .61f, .949f, .779f, 1.125f, .97f, 1.293f, 1.172f, 1.471f, 1.438f, 1.628f, 1.683f, 1.812f, 1.956f, 2.003f, 2.259f, 2.173f, .1f, .264f, .198f, .473f, .324f, .634f, .51f, .831f,
        .681f, 1.005f, .901f, 1.208f, 1.116f, 1.404f, 1.371f, 1.616f, 1.652f, 2.134f, 1.953f, 1.967f, 2.294f, 2.168f, .105f, .315f, .215f, .486f, .345f, .672f, .557f, .89f, .754f, 1.079f, .969f, 1.27f,
        1.201f, 1.778f, 1.506f, 1.699f, 1.812f, 1.884f, 2.151f, 2.084f, .108f, .319f, .221f, .49f, .357f, .696f, .573f, .912f, .78f, 1.115f, 1.008f, 1.31f, 1.26f, 1.53f, 1.57f, 1.741f, 1.9f, 1.934f,
        2.252f, 2.149f, .113f, .338f, .239f, .534f, .396f, .743f, .632f, .978f, .872f, 1.2f, 1.133f, 1.421f, 1.457f, 1.637f, 1.775f, 1.858f, 2.156f, 2.087f, .118f, .343f, .252f, .549f, .42f, .784f, .673f,
        1.015f, .935f, 1.257f, 1.213f, 1.485f, 1.568f, 1.74f, 1.922f, 1.966f, 2.321f, 2.81f, .128f, .358f, .279f, .594f, .513f, .826f, .75f, 1.082f, 1.03f, 1.342f, 1.371f, 1.582f, 1.746f, 1.838f, 2.158f,
        2.099f, .14f, .393f, .309f, .62f, .575f, .897f, .847f, 1.172f, 1.166f, 1.472f, 1.566f, 1.713f, 2.009f, 1.999f, .145f, .384f, .329f, .648f, .608f, .917f, .905f, 1.231f, 1.244f, 1.495f, 1.666f,
        1.796f, 2.138f, 2.105f, .148f, .378f, .333f, .657f, .623f, .941f, .924f, 1.248f, 1.298f, 1.543f, 1.726f, 1.825f, 2.211f, 2.131f, .152f, .398f, .349f, .679f, .652f, .982f, .977f, 1.287f, 1.374f,
        1.593f, 1.832f, 1.888f, 2.358f, 2.174f, .155f, .401f, .356f, .685f, .664f, .991f, .998f, 1.311f, 1.423f, 1.636f, 1.888f, 1.92f, 2.418f, 2.556f, .164f, .408f, .372f, .715f, .704f, 1.033f, 1.05f,
        1.365f, 1.503f, 1.676f, 2.017f, 1.99f, .18f, .448f, .431f, .791f, .827f, 1.161f, 1.25f, 1.513f, 1.804f, 1.89f, 2.425f, 2.252f, .194f, .453f, .495f, .818f, .874f, 1.182f, 1.327f, 1.573f, 1.894f,
        1.93f, .207f, .473f, .53f, .847f, .93f, 1.244f, 1.428f, 1.625f, 2.045f, 2.009f, .21f, .477f, .542f, .858f, .946f, 1.24f, 1.457f, 1.642f, 2.087f, 2.062f, .228f, .506f, .595f, .926f, 1.033f, 1.33f,
        1.622f, 1.77f, 2.336f, 2.189f, .229f, .511f, .603f, .924f, 1.061f, 1.34f, 1.659f, 1.781f, 2.392f, 2.21f, .238f, .526f, .632f, .967f, 1.122f, 1.392f, 1.764f, 1.858f, .248f, .55f, .663f, .998f,
        1.182f, 1.45f, 1.876f, 1.928f, .254f, .56f, .685f, 1.012f, 1.224f, 1.475f, 1.947f, 1.965f, .273f, .569f, .732f, 1.045f, 1.318f, 1.524f, 2.071f, 2.023f, .284f, .585f, .767f, 1.083f, 1.392f, 1.585f,
        2.184f, 2.086f, .287f, .593f, .777f, 1.091f, 1.42f, 1.59f, 2.222f, 2.128f, .302f, .611f, .829f, 1.151f, 1.54f, 1.668f, 2.428f, 2.239f, .311f, .623f, .85f, 1.144f, 1.566f, 1.7f, .32f, .627f, .877f,
        1.176f, 1.612f, 1.728f, .322f, .637f, .887f, 1.184f, 1.639f, 1.763f, .343f, .677f, .956f, 1.273f, 1.804f, 1.845f, .364f, .712f, 1.03f, 1.315f, 1.963f, 1.934f, .376f, .716f, 1.064f, 1.344f, 2.036f,
        1.972f, .381f, .719f, 1.079f, 1.366f, 2.053f, 1.995f, .395f, .732f, 1.112f, 1.379f, 2.128f, 2.009f, .403f, .749f, 1.154f, 1.412f, 2.215f, 2.077f, .41f, .757f, 1.165f, 1.419f, 2.241f, 2.094f, .427f,
        .791f, 1.238f, 1.472f, 2.401f, 2.187f, .483f, .805f, 1.307f, 1.499f, .497f, .812f, 1.351f, 1.549f, .518f, .836f, 1.411f, 1.558f, .521f, .838f, 1.421f, 1.585f, .537f, .854f, 1.47f, 1.618f, .55f,
        .87f, 1.5f, 1.637f, .554f, .874f, 1.517f, 1.665f, .581f, .896f, 1.6f, 1.714f, .617f, .94f, 1.721f, 1.797f, .626f, .953f, 1.756f, 1.84f, .634f, .966f, 1.772f, 1.824f, .638f, .983f, 1.813f, 1.834f,
        .678f, 1.008f, 1.94f, 1.926f, .7f, 1.024f, 2.01f, 1.945f, .732f, 1.052f, 2.103f, 2.003f, .74f, 1.056f, 2.121f, 2.04f, .756f, 1.087f, 2.156f, 2.05f, .769f, 1.086f, 2.217f, 2.09f, .786f, 1.124f,
        2.298f, 2.131f, .808f, 1.133f, 2.36f, 2.153f, .822f, 1.147f, 2.424f, 2.2f, .834f, 1.153f, 2.448f, 2.689f, .859f, 1.166f, .886f, 1.209f, .907f, 1.21f, .932f, 1.236f, .951f, 1.253f, .959f, 1.258f,
        .986f, 1.286f, .998f, 1.288f, 1.011f, 1.317f, 1.027f, 1.328f, 1.051f, 1.341f, 1.077f, 1.359f, 1.094f, 1.368f, 1.099f, 1.394f, 1.113f, 1.392f, 1.152f, 1.43f, 1.18f, 1.438f, 1.197f, 1.458f, 1.225f,
        1.483f, 1.239f, 1.481f, 1.268f, 1.509f, 1.338f, 1.547f, 1.345f, 1.54f, 1.422f, 1.593f, 1.441f, 1.621f, 1.483f, 1.644f, 1.512f, 1.655f, 1.535f, 1.67f, 1.541f, 1.687f, 1.567f, 1.699f, 1.604f, 1.714f,
        1.637f, 1.733f, 1.653f, 1.754f, 1.668f, 1.775f, 1.684f, 1.793f, 1.721f, 1.8f, 1.739f, 1.808f, 1.747f, 1.807f, 1.795f, 1.849f, 1.849f, 1.866f, 1.855f, 1.871f, 1.866f, 1.888f, 1.904f, 1.926f, 1.924f,
        1.946f, 1.937f, 1.946f, 2.01f, 1.984f, 2.022f, 2.004f, 2.048f, 2.012f, 2.084f, 2.022f, 2.134f, 2.039f, 2.173f, 2.069f, 2.215f, 2.1f, 2.248f, 2.115f, 2.296f, 2.145f, 2.319f, 2.174f, 2.337f, 2.173f,
        2.376f, 2.186f, 2.416f, 2.204f, 2.437f, 2.221f
    ];
    private static readonly float[] ddimCosts =
    [
        .072f, .086f, .072f, .183f, .069f, .278f, .073f, .151f, .069f, .246f, .07f, .202f, .069f, .203f, .07f, .233f, .068f, .222f, .071f, .185f, .069f, .237f, .074f, .142f, .068f, .237f, .069f, .257f,
        .07f, .224f, .074f, .188f, .069f, .258f, .072f, .255f, .062f, .602f, .075f, .192f, .07f, .226f, .071f, .207f, .073f, .25f, .072f, .298f, .076f, .328f, .069f, .271f, .076f, .266f, .075f, .31f, .08f,
        .331f, .089f, .344f, .069f, .24f, .078f, .308f, .081f, .333f, .089f, .348f, .109f, .377f, .117f, .405f, .078f, .31f, .087f, .32f, .106f, .376f, .115f, .391f, .128f, .437f, .145f, .45f, .07f, .278f,
        .068f, .236f, .068f, .326f, .073f, .308f, .079f, .334f, .101f, .365f, .112f, .395f, .126f, .429f, .144f, .469f, .157f, .494f, .172f, .529f, .121f, .39f, .136f, .443f, .158f, .486f, .173f, .526f,
        .193f, .574f, .218f, .621f, .071f, .212f, .067f, .245f, .073f, .289f, .079f, .322f, .099f, .359f, .112f, .395f, .128f, .442f, .152f, .476f, .17f, .504f, .19f, .57f, .215f, .619f, .234f, .663f,
        .26f, .719f, .142f, .472f, .16f, .497f, .178f, .561f, .209f, .615f, .235f, .663f, .256f, .724f, .284f, .785f, .311f, .839f, .11f, .399f, .153f, .49f, .202f, .6f, .227f, .655f, .251f, .713f, .279f,
        .792f, .309f, .835f, .339f, .899f, .376f, .96f, .184f, .569f, .241f, .693f, .272f, .752f, .3f, .818f, .34f, .89f, .369f, .956f, .397f, 1.014f, .425f, 1.292f, .074f, .205f, .069f, .275f, .078f,
        .322f, .104f, .379f, .122f, .431f, .149f, .478f, .172f, .54f, .205f, .602f, .233f, .668f, .26f, .737f, .293f, .793f, .332f, .877f, .366f, .946f, .404f, 1.018f, .433f, 1.086f, .486f, 1.158f, .528f,
        1.241f, .246f, .705f, .316f, .85f, .357f, .915f, .391f, .988f, .424f, 1.071f, .482f, 1.157f, .524f, 1.244f, .57f, 1.313f, .616f, 1.403f, .069f, .22f, .072f, .283f, .083f, .342f, .112f, .403f,
        .134f, .46f, .167f, .521f, .201f, .594f, .233f, .667f, .268f, .742f, .298f, .814f, .341f, .898f, .377f, .973f, .415f, 1.057f, .47f, 1.155f, .518f, 1.22f, .562f, 1.307f, .616f, 1.359f, .668f,
        1.482f, .718f, 1.557f, .32f, .854f, .359f, .931f, .454f, 1.108f, .503f, 1.196f, .552f, 1.276f, .605f, 1.369f, .661f, 1.474f, .714f, 1.558f, .765f, 1.824f, .841f, 1.764f, .225f, .651f, .297f, .803f,
        .382f, .985f, .488f, 1.17f, .539f, 1.256f, .59f, 1.371f, .644f, 1.432f, .708f, 1.53f, .766f, 1.651f, .827f, 1.748f, .912f, 1.846f, .974f, 1.951f, .409f, 1.026f, .462f, 1.124f, .52f, 1.231f, .573f,
        1.32f, .632f, 1.424f, .692f, 1.523f, .756f, 1.616f, .83f, 1.735f, .908f, 1.852f, .965f, 1.952f, 1.043f, 2.057f, 1.113f, 2.402f, .073f, .214f, .078f, .27f, .106f, .375f, .131f, .453f, .167f, .524f,
        .209f, .609f, .247f, .718f, .286f, .788f, .336f, .887f, .381f, .969f, .43f, 1.073f, .494f, 1.191f, .549f, 1.287f, .614f, 1.385f, .675f, 1.482f, .734f, 1.587f, .801f, 1.702f, .894f, 1.845f, .961f,
        1.933f, 1.035f, 2.05f, 1.115f, 2.143f, 1.2f, 2.285f, 1.301f, 2.422f, .583f, 1.346f, .784f, 1.657f, .872f, 1.793f, .95f, 1.914f, 1.02f, 2.027f, 1.107f, 2.139f, 1.19f, 2.283f, 1.28f, 2.407f, 1.386f,
        2.551f, 1.477f, 2.953f, .179f, .575f, .273f, .756f, .423f, 1.067f, .491f, 1.179f, .62f, 1.379f, .688f, 1.518f, .754f, 1.629f, .919f, 1.884f, 1.004f, 1.997f, 1.088f, 2.125f, 1.174f, 2.251f, 1.275f,
        2.409f, 1.382f, 2.54f, 1.481f, 2.645f, 1.582f, 2.803f, 1.696f, 2.957f, .659f, 1.458f, .726f, 1.57f, .813f, 1.703f, .898f, 1.834f, .978f, 1.943f, 1.063f, 2.084f, 1.156f, 2.211f, 1.251f, 2.355f,
        1.367f, 2.512f, 1.469f, 2.634f, 1.581f, 2.769f, 1.685f, 2.931f, 1.797f, 3.457f, 1.931f, 3.247f, .407f, 1.056f, .547f, 1.27f, .688f, 1.509f, .857f, 1.79f, 1.032f, 2.039f, 1.128f, 2.181f, 1.232f,
        2.32f, 1.343f, 2.477f, 1.451f, 2.617f, 1.563f, 2.762f, 1.682f, 2.905f, 1.792f, 3.063f, 1.927f, 3.215f, 2.058f, 3.403f, 2.187f, 4.05f, .818f, 1.726f, .992f, 1.989f, 1.093f, 2.129f, 1.306f, 2.441f,
        1.416f, 2.572f, 1.532f, 2.718f, 1.65f, 2.89f, 1.777f, 3.051f, 1.901f, 3.208f, 2.043f, 3.389f, 2.182f, 3.56f, 2.326f, 3.709f, .066f, .286f, .083f, .344f, .125f, .434f, .169f, .527f, .22f, .644f,
        .271f, .753f, .33f, .873f, .385f, .995f, .456f, 1.124f, .529f, 1.24f, .6f, 1.37f, .682f, 1.499f, .765f, 1.634f, .871f, 1.798f, .952f, 1.919f, 1.046f, 2.065f, 1.151f, 2.227f, 1.265f, 2.385f, 1.386f,
        2.527f, 1.5f, 2.68f, 1.632f, 2.857f, 1.752f, 3.016f, 1.881f, 3.189f, 2.02f, 3.365f, 2.172f, 3.536f, 2.32f, 3.705f, 1.216f, 2.297f, 1.465f, 2.636f, 1.714f, 2.983f, 1.849f, 3.115f, 2.002f, 3.311f,
        2.141f, 3.499f, 2.297f, 3.69f, .067f, .275f, .088f, .354f, .132f, .448f, .179f, .563f, .236f, .683f, .292f, .8f, .355f, .921f, .416f, 1.057f, .5f, 1.189f, .58f, 1.331f, .664f, 1.471f, .749f,
        1.613f, .851f, 1.773f, .964f, 1.909f, 1.053f, 2.07f, 1.16f, 2.216f, 1.281f, 2.386f, 1.414f, 2.58f, 1.544f, 2.733f, 1.673f, 2.901f, 1.808f, 3.065f, 1.966f, 3.25f, 2.116f, 3.447f, 2.264f, 3.627f,
        1.223f, 2.301f, 1.36f, 2.492f, 1.621f, 2.851f, 1.755f, 3.019f, 2.06f, 3.404f, 2.215f, 3.586f, 2.38f, 4.085f, .721f, 1.566f, .936f, 1.896f, 1.154f, 2.227f, 1.431f, 2.581f, 1.706f, 2.934f, 2.017f,
        3.336f, 2.18f, 3.53f, 2.342f, 3.722f, 1.497f, 2.663f, 1.639f, 2.857f, 1.79f, 3.05f, 1.948f, 3.257f, 2.125f, 3.468f, 2.29f, 3.652f, .412f, 1.047f, .788f, 1.691f, 1.018f, 2.021f, 1.145f, 2.183f,
        1.567f, 2.76f, 1.875f, 3.162f, 2.216f, 3.585f, 1.971f, 3.297f, .071f, .293f, .109f, .392f, .159f, .501f, .225f, .649f, .29f, .792f, .363f, .95f, .453f, 1.094f, .541f, 1.272f, .64f, 1.429f, .745f,
        1.595f, .864f, 1.783f, .983f, 1.955f, 1.111f, 2.159f, 1.252f, 2.325f, 1.401f, 2.574f, 1.548f, 2.741f, 1.717f, 2.979f, 1.879f, 3.176f, 2.057f, 3.4f, 2.247f, 3.637f, 2.163f, 3.526f, 2.349f, 3.719f,
        1.204f, 2.289f, 1.523f, 2.731f, 1.858f, 3.165f, 2.256f, 3.627f, .075f, .294f, .118f, .418f, .176f, .559f, .249f, .712f, .333f, .875f, .413f, 1.042f, .52f, 1.227f, .624f, 1.424f, .741f, 1.603f,
        .884f, 1.799f, 1.005f, 1.995f, 1.148f, 2.196f, 1.316f, 2.423f, 1.482f, 2.672f, 1.647f, 2.887f, 1.827f, 3.102f, 2.037f, 3.368f, 2.245f, 3.613f, .074f, .293f, .125f, .428f, .192f, .571f, .268f,
        .733f, .347f, .911f, .451f, 1.105f, .554f, 1.296f, .672f, 1.474f, .792f, 1.69f, .949f, 1.897f, 1.085f, 2.112f, 1.24f, 2.322f, 1.416f, 2.577f, 1.599f, 2.813f, 1.784f, 3.068f, 1.985f, 3.302f, 2.199f,
        3.585f, 2.372f, 3.763f, .08f, .275f, .132f, .457f, .212f, .619f, .291f, .802f, .388f, .998f, .509f, 1.195f, .627f, 1.408f, .754f, 1.623f, .908f, 1.864f, 1.072f, 2.098f, 1.244f, 2.348f, 1.437f,
        2.603f, 1.633f, 2.853f, 1.843f, 3.114f, 2.075f, 3.411f, 2.304f, 3.673f, .664f, 1.479f, 1.341f, 2.472f, 1.75f, 2.989f, 1.983f, 3.295f, .079f, .347f, .151f, .495f, .24f, .687f, .344f, .903f, .466f,
        1.127f, .597f, 1.39f, .744f, 1.612f, .924f, 1.855f, 1.099f, 2.134f, 1.301f, 2.409f, 1.51f, 2.682f, 1.74f, 2.987f, 2.001f, 3.293f, 2.261f, 3.654f, 1.611f, 2.827f, 2.12f, 3.455f, .083f, .358f, .17f,
        .529f, .277f, .759f, .39f, 1.007f, .536f, 1.249f, .697f, 1.532f, .879f, 1.819f, 1.079f, 2.122f, 1.301f, 2.42f, 1.542f, 2.75f, 1.803f, 3.094f, 2.089f, 3.452f, 2.378f, 3.791f, .086f, .357f, .173f,
        .544f, .282f, .778f, .407f, 1.036f, .562f, 1.305f, .729f, 1.586f, .922f, 1.886f, 1.133f, 2.2f, 1.38f, 2.522f, 1.63f, 2.853f, 1.89f, 3.195f, 2.201f, 3.57f, .099f, .331f, .197f, .592f, .323f, .824f,
        .467f, 1.143f, .635f, 1.432f, .855f, 1.748f, 1.07f, 2.073f, 1.322f, 2.442f, 1.588f, 3.247f, 1.895f, 3.182f, 2.238f, 3.591f, .105f, .381f, .213f, .623f, .342f, .903f, .512f, 1.207f, .695f, 1.542f,
        .929f, 1.884f, 1.159f, 2.494f, 1.451f, 2.627f, 1.751f, 2.993f, 2.099f, 3.424f, .107f, .389f, .219f, .636f, .354f, .922f, .53f, 1.241f, .725f, 1.579f, .962f, 1.945f, 1.214f, 2.313f, 1.514f, 2.69f,
        1.841f, 3.111f, 2.198f, 3.543f, .112f, .414f, .237f, .682f, .392f, 1.001f, .589f, 1.35f, .811f, 1.726f, 1.086f, 2.121f, 1.393f, 2.554f, 1.718f, 2.967f, 2.096f, 3.425f, .117f, .427f, .25f, .712f,
        .418f, 1.039f, .632f, 1.428f, .881f, 1.824f, 1.169f, 2.243f, 1.506f, 2.678f, 1.863f, 3.14f, 2.266f, 4.232f, .127f, .443f, .277f, .76f, .467f, 1.134f, .699f, 1.532f, .982f, 1.971f, 1.316f, 2.441f,
        1.681f, 2.911f, 2.102f, 3.433f, .139f, .467f, .306f, .821f, .526f, 1.23f, .793f, 1.702f, 1.121f, 2.172f, 1.509f, 2.699f, 1.943f, 3.254f, .144f, .478f, .327f, .848f, .554f, 1.288f, .853f, 1.768f,
        1.193f, 2.279f, 1.615f, 2.82f, 2.083f, 3.4f, .146f, .487f, .331f, .87f, .573f, 1.321f, .874f, 1.812f, 1.232f, 2.328f, 1.665f, 2.898f, 2.154f, 3.495f, .151f, .506f, .347f, .902f, .605f, 1.361f,
        .926f, 1.884f, 1.317f, 2.432f, 1.77f, 3.036f, 2.295f, 3.671f, .154f, .5f, .353f, .925f, .619f, 1.394f, .95f, 1.926f, 1.362f, 2.515f, 1.825f, 3.103f, 2.355f, 3.935f, .163f, .517f, .369f, .959f,
        .658f, 1.456f, 1.006f, 1.991f, 1.449f, 2.597f, 1.942f, 3.238f, .178f, .563f, .428f, 1.062f, .773f, 1.639f, 1.204f, 2.28f, 1.739f, 2.979f, 2.359f, 3.732f, .191f, .582f, .454f, 1.104f, .812f, 1.697f,
        1.264f, 2.378f, 1.827f, 3.11f, .205f, .607f, .486f, 1.155f, .874f, 1.798f, 1.37f, 2.507f, 1.985f, 3.291f, .208f, .615f, .494f, 1.172f, .897f, 1.808f, 1.399f, 2.557f, 2.022f, 3.343f, .226f, .651f,
        .542f, 1.281f, .991f, 1.966f, 1.564f, 2.777f, 2.282f, 3.659f, .228f, .659f, .552f, 1.285f, 1.016f, 1.996f, 1.599f, 2.817f, 2.324f, 3.711f, .236f, .68f, .584f, 1.343f, 1.075f, 2.087f, 1.702f,
        2.944f, .246f, .703f, .615f, 1.38f, 1.141f, 2.18f, 1.81f, 3.09f, .253f, .715f, .636f, 1.426f, 1.183f, 2.243f, 1.881f, 3.181f, .27f, .747f, .671f, 1.485f, 1.253f, 2.337f, 2.005f, 3.333f, .282f,
        .776f, .703f, 1.533f, 1.342f, 2.433f, 2.123f, 3.449f, .285f, .778f, .714f, 1.55f, 1.358f, 2.476f, 2.159f, 3.519f, .299f, .808f, .771f, 1.656f, 1.481f, 2.632f, 2.362f, 3.762f, .309f, .823f, .785f,
        1.664f, 1.503f, 2.673f, .317f, .836f, .817f, 1.7f, 1.549f, 2.727f, .318f, .862f, .828f, 1.721f, 1.582f, 2.771f, .34f, .895f, .911f, 1.829f, 1.735f, 2.969f, .36f, .959f, .987f, 1.953f, 1.9f, 3.171f,
        .373f, .96f, 1.016f, 2.01f, 1.964f, 3.226f, .378f, .964f, 1.03f, 2.013f, 1.989f, 3.262f, .391f, .999f, 1.058f, 2.072f, 2.051f, 3.366f, .4f, 1.01f, 1.106f, 2.133f, 2.145f, 3.482f, .407f, 1.029f,
        1.117f, 2.145f, 2.167f, 3.5f, .425f, 1.05f, 1.188f, 2.252f, 2.321f, 3.672f, .453f, 1.096f, 1.234f, 2.308f, .462f, 1.102f, 1.278f, 2.376f, .481f, 1.151f, 1.338f, 2.456f, .483f, 1.16f, 1.356f, 2.47f,
        .499f, 1.18f, 1.398f, 2.543f, .51f, 1.199f, 1.433f, 2.586f, .513f, 1.206f, 1.449f, 2.6f, .538f, 1.247f, 1.526f, 2.719f, .572f, 1.308f, 1.651f, 2.856f, .581f, 1.349f, 1.686f, 2.89f, .59f, 1.337f,
        1.701f, 2.914f, .598f, 1.364f, 1.734f, 2.97f, .634f, 1.418f, 1.863f, 3.132f, .657f, 1.461f, 1.929f, 3.194f, .681f, 1.495f, 2.023f, 3.31f, .688f, 1.503f, 2.039f, 3.347f, .697f, 1.525f, 2.082f,
        3.37f, .712f, 1.55f, 2.14f, 3.475f, .735f, 1.605f, 2.219f, 3.544f, .755f, 1.615f, 2.28f, 3.637f, .771f, 1.65f, 2.342f, 3.72f, .781f, 1.649f, 2.369f, 4.084f, .801f, 1.698f, .828f, 1.727f, .846f,
        1.749f, .87f, 1.781f, .895f, 1.824f, .903f, 1.833f, .93f, 1.883f, .942f, 1.89f, .957f, 1.932f, .972f, 1.933f, .995f, 1.979f, 1.022f, 2.008f, 1.036f, 2.045f, 1.041f, 2.044f, 1.057f, 2.055f, 1.101f,
        2.133f, 1.128f, 2.168f, 1.141f, 2.207f, 1.172f, 2.226f, 1.183f, 2.252f, 1.209f, 2.293f, 1.258f, 2.347f, 1.262f, 2.361f, 1.348f, 2.464f, 1.368f, 2.488f, 1.408f, 2.55f, 1.432f, 2.591f, 1.461f,
        2.625f, 1.463f, 2.615f, 1.49f, 2.663f, 1.525f, 2.721f, 1.556f, 2.745f, 1.578f, 2.769f, 1.59f, 2.779f, 1.614f, 2.816f, 1.645f, 2.856f, 1.665f, 2.899f, 1.672f, 2.9f, 1.715f, 2.953f, 1.767f, 2.998f,
        1.771f, 3.017f, 1.79f, 3.033f, 1.821f, 3.076f, 1.846f, 3.107f, 1.856f, 3.115f, 1.924f, 3.201f, 1.943f, 3.214f, 1.966f, 3.262f, 2.003f, 3.299f, 2.055f, 3.368f, 2.1f, 3.412f, 2.138f, 3.468f, 2.175f,
        3.526f, 2.211f, 3.566f, 2.242f, 3.611f, 2.256f, 3.612f, 2.294f, 3.664f, 2.337f, 3.701f, 2.355f, 3.746f
    ];
    private static int[] resolutionCurve;
    #endregion

    static AnlasCostCalculator()
    {
        resolutionCurve = Enumerable.Repeat(0, resolutionCurveBase.Length + 1).ToArray();

        for (int i = 0; i < resolutionCurveBase.Length; i++)
        {
            resolutionCurve[resolutionCurveBase[i]] = 2 * i;
        }
    }

    public static int Calculate(GenerationConfig config, SubscriptionInfo? subscription)
    {
        var parameter = config.GenerationParameter;
        int width = parameter.Width;
        int height = parameter.Height;
        int imageSize = Math.Max(width * height, 65536);
        var model = config.Model;
        var sampler = parameter.Sampler ?? model.Samplers[0];
        int steps = parameter.Steps;
        int batchSize = config.BatchSize;
        float v;
        float strength = parameter.ImageData == null ? 1 : (float)parameter.Strength.GetValueOrDefault();
        bool sm = parameter.Smea && sampler.AllowSmea;
        bool dyn = sm && parameter.Dyn;

        if (subscription?.Tier >= SubscriptionTier.Opus && subscription.Active && steps <= 28 && imageSize <= 1048576)
            batchSize = 0;

        if (model.Group == ModelGroup.StableDiffusionXL || model.Group == ModelGroup.StableDiffusionXLFurry)
        {
            v = MathF.Ceiling(2951823174884865e-21f * imageSize + 5.753298233447344e-7f * imageSize * steps) * (dyn ? 1.4f : sm ? 1.2f : 1f);
        }
        else if (imageSize <= 1048576 && (sampler == SamplerInfo.Ddim || sampler == SamplerInfo.Euler || sampler == SamplerInfo.EulerAncestral))
        {
            v = (15.266497014243718f * MathF.Exp(imageSize / 1048576f * 0.6326248927474729f) - 15.225164493059737f) / 28f * steps;
        }
        else
        {
            float[] costs = naiCosts;

            if (sm)
            {
                costs = smeaCosts;

                if (dyn)
                    costs = dynCosts;
            }
            else if (sampler == SamplerInfo.Ddim)
                costs = ddimCosts;

            int index = resolutionCurve[(int)(MathF.Floor(width / 64f) * MathF.Floor(height / 64f))];
            v = costs[index] * steps + costs[index + 1];
        }

        int result = (int)Math.Max(MathF.Ceiling(v * strength), 2);

        return result * batchSize;
    }
}
